(this["webpackJsonplogic-games"]=this["webpackJsonplogic-games"]||[]).push([[6],{100:function(e,t,r){e.exports={button:"minesweeper_button__3nJtR",highlite:"minesweeper_highlite__2SRZT"}},101:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return j}));var a=r(43),s=r(38),n=r(39),o=r(41),i=r(40),c=r(2),l=r(0),u=r.n(l),p=r(47),d=r(49),A=r(51),f=r(52),b=r(53),m=r.n(b),h=r(100),v=r.n(h),g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAfCAYAAAAfrhY5AAAACXBIWXMAAAsSAAALEgHS3X78AAAAf0lEQVRIie3XIQ7AIAyF4Y7MzO10OymHQaIgQS8ZpulSEhI2N0Fn3m8RX0A9FhGhnLOQcbXWy1mjmsIhhM0c7zAz0/o+TClNxUspDdbMb97hX/Ax4MCBAwcOHDhw4MA/9djtOujHXT07N8L9J2GV897vf8Bae/YY48HMp6lMRDfopUuKB+qM/QAAAABJRU5ErkJggg==",j=function(e){Object(o.a)(r,e);var t=Object(i.a)(r);function r(e){var a;return Object(s.a)(this,r),(a=t.call(this,e)).displayPoint=function(e,t,r){var s=a.canvas.current.getContext("2d");switch(s.font="800 24px inter",void 0!==r&&(a.board[a.props.gameInfo.boardSizeX*t+e]=r),r){case-1:var n=new Image;n.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAfCAYAAAAfrhY5AAAACXBIWXMAAAsSAAALEgHS3X78AAABd0lEQVRIie2XTWqDQBSAn2lDUxpL1zmAB8gpssgmSz2AF/ACWXSbC3gB9/EcpotuxHWYARfpQttYi0x5A8rUYHVEJxT6wSD+fu/Nc+SpMcaAUspAMVmWnSeqpQiKwzC8Vy4vxUVRwG39JCFkVHkcx1yMKM+8FF9FLvI35TeEwMNuB4+O01t+8cK1MfN9uPN9mB4O/Mqv5XJcOWY58zwu1tK0t0xKXs9yaBprriUJTINgNDH8Jme6Dsl2C2/7PXyu12rlJcViUQVxNk1g87k6uRjEu+PAyffhw7YHCUJ6nWM5UI5BvKxW8Hw89pZLr3MxiHizgdc47i3//7ZfBamaY6NBKa32oyiCNE0hCILqmK7rYBhGp+ddNJBNnYzrunx0wTRNsG2bB1JHDL512jE7y7I6ixHP8/g94oxIZy6TbRP1WWjNvE+2TZSzgM+s07nmQyFV8zH5sdSwoRf76rGZiOLyT0IVXJ7n+Um1mIMvHCHkCbdKB2PwDSCFMkRtlBlEAAAAAElFTkSuQmCC",n.onload=function(){s.drawImage(n,1,1,30,30,25*e,25*t,25,25)};break;case void 0:var o=new Image;o.src=g,o.onload=function(){s.drawImage(o,1,1,30,30,25*e,25*t,25,25),delete a.board[a.props.gameInfo.boardSizeX*t+e]};break;case 9:var i=new Image;i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAfCAYAAAAfrhY5AAAACXBIWXMAAAsSAAALEgHS3X78AAABx0lEQVRIic2XsUrEQBCGRz0EA4IgCrG5E2zUUsRS8A0EC30DmysOG30CbeSKa3wDFRSb1IKliKUKInhaGFAEQYggSOSPbticmczeLlz8Yclebma/3WR3ZtIXxzEFQRBTCaoopO/7PaWHYUj9LgN49w9Js1XF2pOIRs4vkms0WbXyd1q5q1j43PIajZ6eOQMwBsbKEwtv19ep1tpzmgB8MQbGyhP7zl+XFpMrnFVfDYg2fHWT3vMPj+l9djqx020VWL+nKz3n0lEbfH6hqe1dGmoX7+6PWpXutjboc3ys0M74qAE809gUwRBsYAsfSUZwrHggiogadaLH25+GPiPYwscZjvebrlgHFsDp9wlIm9UIbitnuL6rqdnK75v45ihz1BCnVcjMFYAGUF0TB0eZ328L82k4LjW8ZlaOGXUmCQQQFz2trrDe4soRuWwl+YpwLjSaSPI1giNkdiv4OMMhxOovzzPGwxY+kozgSBLXzR2jJwAb2EqJhSS4XgioCSBF5m0k3MN/OlgqSNh8zhUCes5WAYQ7TqogIWbzsXCpEDARV5CI8MuTfWuors7qRtf/Ca/dCkmiNLjtx8IfOAq6XiupXksREX0DvkrG92RdQIoAAAAASUVORK5CYII=",i.onload=function(){s.drawImage(i,1,1,30,30,25*e,25*t,25,25)}}if(r>=0&&r<9){var c=new Image;c.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB8AAAAfCAYAAAAfrhY5AAAACXBIWXMAAAsSAAALEgHS3X78AAAATElEQVRIie3XQQ0AIAwEwYNgov4t1FNllEACEiiPXQOTe17LTLl7qqBxSDN7qkeEesXiEzg4ODg4ODg4ODg4+L/4/WrrO71uv9SSJE3MFA8LEhTWNgAAAABJRU5ErkJggg==",c.onload=function(){switch(r){case 1:s.fillStyle="blue";break;case 2:s.fillStyle="green";break;case 3:s.fillStyle="red";break;case 4:s.fillStyle="blue";break;case 5:s.fillStyle="brown";break;case 6:s.fillStyle="aqua";break;case 7:s.fillStyle="yellow";break;case 8:s.fillStyle="brown"}s.drawImage(c,1,1,30,30,25*e,25*t,25,25),r>0&&s.fillText(r,25*e+5,25*t+22)}}},a.clear=function(){var e=new Image;e.src=g,e.onload=function(){var t=a.canvas.current.getContext("2d");t.clearRect(0,0,25*(a.props.gameInfo.boardSizeX+1),25*(a.props.gameInfo.boardSizeY+1)),t.strokeStyle="#000",t.lineWidth=1,t.beginPath();for(var r=0;r<a.props.gameInfo.boardSizeX;r++)for(var s=0;s<a.props.gameInfo.boardSizeY;s++)t.drawImage(e,1,1,30,30,25*r,25*s,25,25)}},a.action=function(e,t){if(e.preventDefault(),!a.paused){var r=a.canvas.current.getBoundingClientRect(),s=~~((e.clientX-r.left)/25),n=~~((e.clientY-r.top)/25),o=n*a.props.gameInfo.boardSizeX+s;a.state.actionTypeDefuse&&"left"===t?a.board.hasOwnProperty(o)||a.props.emitter.emit("action",{cell:o}):void 0!==a.board[o]&&-1!==a.board[o]||a.displayPoint(s,n,-1===a.board[o]?void 0:-1)}},a.state={score:e.gameInfo.score,alertValue:"",actionTypeDefuse:!0},a.canvas=u.a.createRef(),a}return Object(n.a)(r,[{key:"componentWillMount",value:function(){var e,t=this;this.paused=this.props.gameInfo.paused,this.board=null!==(e=this.props.gameInfo.currentBoardPlayer)&&void 0!==e?e:{},this.props.players.forEach((function(e,r){return e.userId===localStorage.getItem("userId")?t.playerNumber=r:null})),this.emitterUnsubGame=this.props.emitter.sub("game",(function(e){switch(e.type){case"roundStarted":t.setState((function(t){var r=Object.assign(t.score);for(var a in t.score)r[a][1]=0;return{roundStarted:e.roundStarted,score:r,alertValue:"\u0420\u0430\u0443\u043d\u0434 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f!"}})),t.paused=!1,t.board={},t.clear();break;case"roundFinished":t.paused=!0;var r=t.state.score[e.currentPlayer][0]+1;t.setState((function(s){return{score:Object(a.a)(Object(a.a)({},s.score),r),alertValue:"\u0420\u0430\u0443\u043d\u0434 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d! \u041f\u043e\u0431\u0435\u0434\u0438\u043b ".concat(t.props.players[e.currentPlayer].userName)}}));break;case"openedCells":for(var s in e.cells)t.displayPoint(s%t.props.gameInfo.boardSizeX,~~(s/t.props.gameInfo.boardSizeX),e.cells[s]);var n=t.state.score[t.playerNumber][1]+Object.keys(e.cells).length;t.setState((function(e){var r=Object.assign(e.score);return r[t.playerNumber][1]=n,{score:r}}));break;case"explode":t.playerNumber===Number(e.currentPlayer)&&t.displayPoint(e.cell%t.props.gameInfo.boardSizeX,~~(e.cell/t.props.gameInfo.boardSizeX),9),t.setState({alertValue:"".concat(t.props.players[e.currentPlayer].userName," \u0432\u0437\u043e\u0440\u0432\u0430\u043b\u0441\u044f")});break;case"progress":var o=t.state.score[e.currentPlayer][1]+e.countCells;t.setState((function(t){var r=Object.assign(t.score);return r[e.currentPlayer][1]=o,{score:r}}));break;case"matchFinished":t.setState({alertValue:"\u041c\u0430\u0442\u0447 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d. \u041f\u043e\u0431\u0435\u0434\u0438\u043b ".concat(t.props.players[Number(e.currentPlayer)].userName)})}}))}},{key:"componentDidMount",value:function(){for(var e in this.clear(),this.board)this.displayPoint(e%this.props.gameInfo.boardSizeX,~~(e/this.props.gameInfo.boardSizeX),this.board[e])}},{key:"componentWillUnmount",value:function(){this.emitterUnsubGame()}},{key:"render",value:function(){var e=this;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(p.a,{displayCurrentPlayer:!1,paused:this.paused,players:this.props.players,playerNumber:this.playerNumber,score:this.state.score,scoreItemNames:["\u0421\u0447\u0451\u0442","\u041f\u0440\u043e\u0433\u0440\u0435\u0441\u0441"]}),Object(c.jsx)(f.a,{className:m.a.info,data:[["\u0420\u0430\u0443\u043d\u0434\u043e\u0432",this.props.gameInfo.roundsForWin],["\u0412\u044b\u0441\u043e\u0442\u0430 \u043f\u043e\u043b\u044f",this.props.gameInfo.boardSizeX],["\u0428\u0438\u0440\u0438\u043d\u0430 \u043f\u043e\u043b\u044f",this.props.gameInfo.boardSizeX],["\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0438\u043d",this.props.gameInfo.minesCount]]}),Object(c.jsx)(d.a,{value:this.state.alertValue}),Object(c.jsx)("div",{className:"".concat(v.a.button," ").concat(this.state.actionTypeDefuse?"":v.a.highlite),onClick:function(){return e.setState({actionTypeDefuse:!e.state.actionTypeDefuse})}}),Object(c.jsxs)("div",{className:m.a.canvas,children:[Object(c.jsx)("canvas",{ref:this.canvas,onClick:function(t){return e.action(t,"left")},onContextMenu:function(t){return e.action(t,"right")},width:25*+this.props.gameInfo.boardSizeX+1,height:25*+this.props.gameInfo.boardSizeY+1}),Object(c.jsx)(A.a,{className:"".concat(m.a.ruler," ").concat(m.a.ruler24),countX:this.props.gameInfo.boardSizeX,countY:this.props.gameInfo.boardSizeY})]})]})}}]),r}(u.a.Component)},47:function(e,t,r){"use strict";r.d(t,"a",(function(){return A}));var a=r(46),s=r(38),n=r(39),o=r(41),i=r(40),c=r(2),l=r(0),u=r.n(l),p=r(48),d=r.n(p),A=function(e){Object(o.a)(r,e);var t=Object(i.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).getPlayersList=function(){var e=[];if(void 0!==n.props.queue){var t,r=Object(a.a)(n.props.queue);try{for(r.s();!(t=r.n()).done;){var s=t.value;e.push(n.props.players[s])}}catch(o){r.e(o)}finally{r.f()}}else Array.prototype.push.apply(e,n.props.players);return e.map((function(e,t){return Object(c.jsxs)("div",{style:{color:e.connected?n.props.playerNumber===t?"rgb(255,165,0)":"#000":"rgb(150,150,150)"},children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:t+1}),Object(c.jsxs)("div",{children:["#",e.userId]}),Object(c.jsx)("div",{children:e.userName})]}),n.props.score[t].map((function(e){return Object(c.jsx)("div",{children:e})}))]})}))},n.state={timeleft:~~((e.timeTurn+e.lasttime-Date.now())/1e3)},n.playerTurnTimer=void 0,n}return Object(n.a)(r,[{key:"componentDidMount",value:function(){var e=this;this.props.displayCurrentPlayer&&(this.playerTurnTimer=setInterval((function(){if(!e.paused){var t=~~((e.props.timeTurn+e.props.lasttime-Date.now())/1e3);e.setState({timeleft:t})}}),1e3))}},{key:"componentWillUnmount",value:function(){this.props.displayCurrentPlayer&&clearInterval(this.playerTurnTimer)}},{key:"render",value:function(){var e="rgb(".concat(255-this.state.timeleft/(this.props.timeTurn/1e3)*255,", ").concat(this.state.timeleft/(this.props.timeTurn/1e3)*200,", 0)");return Object(c.jsxs)("div",{className:d.a.score,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:"\u0418\u0433\u0440\u043e\u043a\u0438"}),this.props.scoreItemNames.map((function(e){return Object(c.jsx)("div",{children:e})}))]}),this.props.displayCurrentPlayer?Object(c.jsxs)("div",{className:d.a.scoreCurrentPlayer,style:{color:e,top:30+42*this.props.currentPlayerTurn+"px",backgroundColor:e},children:[Object(c.jsx)("div",{children:this.state.timeleft}),Object(c.jsx)("div",{style:{"border-color":e}}),Object(c.jsx)("div",{style:{"border-color":e}})]}):Object(c.jsx)("div",{}),this.getPlayersList()]})}}]),r}(u.a.Component)},48:function(e,t,r){e.exports={score:"score_score__1Slqo",scoreCurrentPlayer:"score_scoreCurrentPlayer__36TAD"}},49:function(e,t,r){"use strict";r.d(t,"a",(function(){return d}));var a=r(38),s=r(39),n=r(41),o=r(40),i=r(2),c=r(0),l=r.n(c),u=r(50),p=r.n(u),d=function(e){Object(n.a)(r,e);var t=Object(o.a)(r);function r(e){var s;return Object(a.a)(this,r),(s=t.call(this,e)).shouldComponentUpdate=function(e){return e.value!==s.props.value&&(s.alertDisplay=!0,void 0!==s.alertTimeoutDestroy&&clearTimeout(s.alertTimeoutDestroy),s.alertTimeoutDestroy=setTimeout((function(){s.alertDisplay=!1,s.alertTimeoutDestroy=void 0,s.forceUpdate()}),3e3),!0)},s.alertHide=function(){clearTimeout(s.alertTimeoutDestroy),s.alertDisplay=!1,s.alertTimeoutDestroy=void 0,s.forceUpdate()},s.alertDisplay=!1,s.alertTimeoutDestroy=void 0,s}return Object(s.a)(r,[{key:"render",value:function(){return Object(i.jsx)("div",{className:"".concat(p.a.alert," ").concat(this.alertDisplay?p.a.alertDisplay:""),children:Object(i.jsx)("div",{onClick:this.alertHide,children:this.props.value})})}}]),r}(l.a.Component)},50:function(e,t,r){e.exports={alert:"alert_alert__285A5",alertDisplay:"alert_alertDisplay__3muLT"}},51:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r(2);r(0);function s(e){function t(e){for(var t=[],r=0;r<e;r++)t.push(Object(a.jsx)("li",{}));return t}return Object(a.jsxs)("div",{className:e.className,children:[Object(a.jsx)("ol",{children:t(e.countX)}),Object(a.jsx)("ol",{children:t(e.countY)}),Object(a.jsx)("div",{children:Object(a.jsx)("div",{})}),Object(a.jsx)("div",{}),Object(a.jsx)("div",{})]})}},52:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r(2);r(0);function s(e){return Object(a.jsx)("div",{className:e.className,children:e.data.map((function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:e[0]}),Object(a.jsxs)("span",{children:[" ",e[1]]})]})}))})}},53:function(e,t,r){e.exports={canvas:"canvas_canvas__1xjwk",ruler:"canvas_ruler__3jpTN",info:"canvas_info__larj0",ruler24:"canvas_ruler24__2YnvR"}}}]);
//# sourceMappingURL=6.74107fe1.chunk.js.map