(this["webpackJsonplogic-games"]=this["webpackJsonplogic-games"]||[]).push([[5],{35:function(e,t,n){"use strict";n.r(t);var r=n(43),a=n(38),s=n(39),i=n(41),o=n(40),c=n(2),l=n(0),u=n.n(l),d=n(1),p=n(9),b=n(15);function h(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var m=n(90),j=n.n(m);function f(e){var t=e.data,n=h(e,["data"]);return Object(c.jsx)("select",Object(r.a)(Object(r.a)({},n),{},{required:!0,className:j.a.select,children:t.map((function(t){t.text;var n=h(t,["text"]);return t.value===e.selected?Object(c.jsx)("option",Object(r.a)(Object(r.a)({selected:!0},n),{},{children:t.text})):Object(c.jsx)("option",Object(r.a)(Object(r.a)({},n),{},{children:t.text}))}))}))}var v=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={value:e.value},r}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.label,a=(t.value,t.min),s=t.max,i=h(t,["label","value","min","max"]);return Object(c.jsx)("div",{className:j.a.number,children:Object(c.jsxs)("label",{children:[Object(c.jsx)("input",Object(r.a)(Object(r.a)({},i),{},{value:this.state.value,type:"number",onChange:function(t){return e.setState({value:t.target.value>s||t.target.value<(a>0?0:a)?a:t.target.value})}})),Object(c.jsx)("div",{children:n})]})})}}]),n}(u.a.Component),O=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={value:e.value},r}return Object(s.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.label,a=h(t,["label"]);return Object(c.jsx)("div",{className:j.a.checkbox,children:Object(c.jsxs)("label",{children:[Object(c.jsx)("input",Object(r.a)(Object(r.a)({},a),{},{checked:this.state.value,onChange:function(t){return e.setState({value:t.target.checked})},type:"checkbox"})),Object(c.jsx)("div",{children:n})]})})}}]),n}(u.a.Component),g=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={value:e.value||""},r}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return Object(c.jsx)("div",{className:j.a.input,children:Object(c.jsx)("input",Object(r.a)(Object(r.a)({},this.props),{},{type:"text",value:this.state.value,onChange:function(t){return e.setState({value:t.target.value})}}))})}}]),n}(u.a.Component);function y(e){var t=e.onSubmit,n=e.children,a=h(e,["onSubmit","children"]);return Object(c.jsxs)("form",{className:j.a.input,onSubmit:t,children:[Object(c.jsx)("input",Object(r.a)(Object(r.a)({},a),{},{type:"text"})),Object(c.jsxs)("label",{children:[Object(c.jsx)("input",{type:"submit"}),n]})]})}function x(e){var t=e.children,n=h(e,["children"]);return Object(c.jsx)("input",Object(r.a)(Object(r.a)({className:j.a.button,type:"submit"},n),{},{value:t}))}function I(e){var t=e.children,n=h(e,["children"]);return Object(c.jsx)("button",Object(r.a)(Object(r.a)({className:j.a.button},n),{},{children:t}))}var w=n(91),S=n.n(w),k=n(92);function P(e){return k[e]}function _(){return k}var C=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r,s;return Object(a.a)(this,n),(s=t.call(this,e)).setGameId=function(e){return s.setState({gameSettingsField:s.getSettingsByGameId(e)})},s.state={usePw:null!==(r=e.usePw)&&void 0!==r&&r,gameSettingsField:Object(c.jsx)("div",{})},s}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.setGameId(this.props.gameId)}},{key:"getSettingsByGameId",value:function(e){var t,n,r,a,s,i,o,l,u,d,p,b,h,m,j,f,O,g;switch(e){case"tictactoe":return Object(c.jsxs)("div",{children:[Object(c.jsx)(v,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432",name:"players",disabled:this.props.disabled,value:null!==(t=this.props.max)&&void 0!==t?t:2,min:2,max:3}),Object(c.jsx)(v,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0440\u0430\u0443\u043d\u0434\u043e\u0432 \u0434\u043b\u044f \u043f\u043e\u0431\u0435\u0434\u044b",disabled:this.props.disabled,name:"roundsForWin",value:null!==(n=null===(r=this.props.gameProps)||void 0===r?void 0:r.roundsForWin)&&void 0!==n?n:10,min:5,max:30}),Object(c.jsx)(v,{label:"\u0412\u0440\u0435\u043c\u044f \u043d\u0430 \u0445\u043e\u0434",disabled:this.props.disabled,name:"timeTurn",value:null!==(a=null===(s=this.props.gameProps)||void 0===s?void 0:s.timeTurn)&&void 0!==a?a:20,min:3,max:60}),Object(c.jsx)(v,{label:"\u0420\u0430\u0437\u043c\u0435\u0440 \u043f\u043e\u043b\u044f",disabled:this.props.disabled,name:"boardSize",value:null!==(i=null===(o=this.props.gameProps)||void 0===o?void 0:o.boardSize)&&void 0!==i?i:20,min:3,max:30}),Object(c.jsx)(v,{label:"\u0414\u043b\u0438\u043d\u0430 \u0440\u044f\u0434\u0430 \u0434\u043b\u044f \u043f\u043e\u0431\u0435\u0434\u044b",disabled:this.props.disabled,name:"cellsForWin",value:null!==(l=null===(u=this.props.gameProps)||void 0===u?void 0:u.cellsForWin)&&void 0!==l?l:5,min:3,max:30})]});case"minesweeper":return Object(c.jsxs)("div",{children:[Object(c.jsx)(v,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432",disabled:this.props.disabled,name:"players",value:null!==(d=this.props.max)&&void 0!==d?d:2,min:2,max:5}),Object(c.jsx)(v,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0440\u0430\u0443\u043d\u0434\u043e\u0432 \u0434\u043b\u044f \u043f\u043e\u0431\u0435\u0434\u044b",disabled:this.props.disabled,name:"roundsForWin",value:null!==(p=null===(b=this.props.gameProps)||void 0===b?void 0:b.roundsForWin)&&void 0!==p?p:10,min:5,max:30}),Object(c.jsx)(v,{label:"\u0428\u0438\u0440\u0438\u043d\u0430 \u043f\u043e\u043b\u044f",disabled:this.props.disabled,name:"boardSizeX",value:null!==(h=null===(m=this.props.gameProps)||void 0===m?void 0:m.boardSizeX)&&void 0!==h?h:20,min:10,max:40}),Object(c.jsx)(v,{label:"\u0412\u044b\u0441\u043e\u0442\u0430 \u043f\u043e\u043b\u044f",disabled:this.props.disabled,name:"boardSizeY",value:null!==(j=null===(f=this.props.gameProps)||void 0===f?void 0:f.boardSizeY)&&void 0!==j?j:25,min:10,max:60}),Object(c.jsx)(v,{label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043c\u0438\u043d (\u0441\u043b\u043e\u0436\u043d\u043e\u0441\u0442\u044c)",disabled:this.props.disabled,name:"minesCount",value:null!==(O=null===(g=this.props.gameProps)||void 0===g?void 0:g.minesCount)&&void 0!==O?O:50,min:5,max:200})]});default:return Object(c.jsx)("div",{})}}},{key:"render",value:function(){var e,t,n=this;return Object(c.jsxs)("div",{className:"".concat(S.a.roomInfo),children:[Object(c.jsx)("div",{children:Object(c.jsx)("div",{children:void 0===this.props.roomId?"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043d\u0430\u0442\u044b":"\u041a\u043e\u043c\u043d\u0430\u0442\u0430 #"+this.props.roomId})}),Object(c.jsxs)("form",{onSubmit:this.props.onSubmit,children:[Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:"\u041e\u0431\u0449\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(c.jsx)(g,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043d\u0430\u0442\u044b",name:"name",value:this.props.name,disabled:void 0!==this.props.name}),Object(c.jsx)(f,{disabled:this.props.disabled,name:"gameId",data:function(){var e=[],t=_();for(var n in t)e.push({value:n,text:t[n]});return e}(),selected:this.props.gameId,onClick:function(e){return n.setGameId(e.target.value)}}),Object(c.jsx)(O,{label:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c?",name:"usePw",disabled:this.props.disabled,value:this.state.usePw,onClick:function(e){return n.setState({usePw:e.target.checked})}}),Object(c.jsx)(g,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",name:"pw",disabled:this.state.usePw}),Object(c.jsx)(O,{label:"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0439?",name:"private",disabled:this.props.disabled,value:null!==(e=this.props.private)&&void 0!==e&&e}),Object(c.jsx)(O,{label:"\u0410\u0432\u0442\u043e\u0441\u0442\u0430\u0440\u0442",name:"autostart",disabled:this.props.disabled,value:null===(t=this.props.autostart)||void 0===t||t})]}),this.state.gameSettingsField,Object(c.jsx)("div",{children:void 0===this.props.roomId?Object(c.jsx)(c.Fragment,{children:"\u0412\u044b \u0441\u0442\u0430\u043d\u0438\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u043c \u0443\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u043e\u043c \u044d\u0442\u043e\u0439 \u043a\u043e\u043c\u043d\u0430\u0442\u044b!"}):Object(c.jsxs)(c.Fragment,{children:["\u0418\u0433\u0440\u043e\u043a\u0438 \u0432 \u0442\u0435\u043a\u0443\u0449\u0435\u0439 \u043a\u043e\u043c\u043d\u0430\u0442\u0435",this.props.users.map((function(e){return Object(c.jsxs)("div",{className:e.connected?null:S.a.disconnected,children:[Object(c.jsx)("div",{children:e.userId}),Object(c.jsxs)("div",{children:[" ",e.userName]})]})}))]})})]}),Object(c.jsx)("div",{children:this.props.children})]})]})}}]),n}(u.a.Component),N=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).createRoom=function(t){t.preventDefault();var n={name:t.target.name.value,gameId:t.target.gameId.value,usePw:t.target.usePw.checked,private:t.target.private.checked,autostart:t.target.autostart.checked,pw:t.target.usePw.value?t.target.pw.value||"":void 0,userName:localStorage.getItem("userName"),gameProps:e.getPropsByGameId(t.target.gameId.value,t)};if(!(n.name.length<3||n.name.length>20))try{e.props.ws.send(JSON.stringify({type:"create",data:n}))}catch(r){console.log("\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443")}},e}return Object(s.a)(n,[{key:"getPropsByGameId",value:function(e,t){switch(e){case"tictactoe":return{max:t.target.players.value,roundsForWin:+t.target.roundsForWin.value,boardSize:+t.target.boardSize.value,timeTurn:+t.target.timeTurn.value,cellsForWin:+t.target.cellsForWin.value};case"minesweeper":return{max:t.target.players.value,roundsForWin:+t.target.roundsForWin.value,boardSizeX:+t.target.boardSizeX.value,boardSizeY:+t.target.boardSizeY.value,minesCount:+t.target.minesCount.value};default:return{}}}},{key:"render",value:function(){return Object(c.jsx)(C,{gameId:this.props.gameId,onSubmit:this.createRoom,children:Object(c.jsx)(x,{children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043c\u043d\u0430\u0442\u0443"})})}}]),n}(u.a.Component),E=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).joinRoom=function(t){t.preventDefault(),e.props.ws.send(JSON.stringify({type:"join",data:{roomId:e.props.data.roomId,pw:t.target.usePw.checked?t.target.pw.value:void 0,userName:localStorage.getItem("userName")}}))},e}return Object(s.a)(n,[{key:"render",value:function(){return Object(c.jsx)(C,Object(r.a)(Object(r.a)({},this.props.data),{},{disabled:this.props.disabled,onSubmit:this.joinRoom,children:Object(c.jsx)(x,{disabled:this.props.data.started,children:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f"})}))}}]),n}(u.a.Component),M=n(93),z=n.n(M);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function U(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var G=l.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),H=l.createElement("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-1-11v6h2v-6h-2zm0-4v2h2V7h-2z",fill:"#000"});function F(e,t){var n=e.title,r=e.titleId,a=U(e,["title","titleId"]);return l.createElement("svg",D({viewBox:"0 0 24 24",width:24,height:24,ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,G,H)}var T=l.forwardRef(F),W=(n.p,function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).wsReconnect=function(){var e=new WebSocket("wss://games-ws.ionquen.ru:8082");console.log("\u041f\u043e\u043f\u044b\u0442\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443"),e.onopen=function(){e.send(JSON.stringify({type:"list",data:{gameId:r.props.match.params.gameId,token:localStorage.getItem("token")}})),r.props.emitter.emit("chatStateChange",!0),e.onmessage=function(e){var t=JSON.parse(e.data),n=t.data;switch(t.type){case"token":localStorage.setItem("token",n.token),localStorage.setItem("userId",n.userId),localStorage.setItem("userName","\u0413\u043e\u0441\u0442\u044c".concat(n.userId));break;case"list":r.setState({lobbyList:n});break;case"connectbyroomid":if(!1===n)return void alert("\u041a\u043e\u043c\u043d\u0430\u0442\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430");r.props.setPopupUntracked(Object(c.jsx)(b.a,{setPopupUntracked:r.props.setPopupUntracked,children:Object(c.jsx)(E,{ws:r.ws,data:n.roomInfo,disabled:!0})}));break;case"join":r.props.setPopupUntracked(null),r.props.history.push("/game/".concat(r.props.match.params.gameId,"/").concat(n))}},r.ws=e},e.onerror=function(t){return e.close()},e.onclose=function(e){return 1e3===e?null:function(){r.reconnectTimeout=setTimeout(r.wsReconnect,3e3)}}},r.createNewRoom=function(){return r.props.setPopupUntracked(Object(c.jsx)(b.a,{setPopupUntracked:r.props.setPopupUntracked,children:Object(c.jsx)(N,{ws:r.ws,gameId:r.props.match.params.gameId,disabled:!1})}))},r.connectById=function(e){e.preventDefault(),r.ws.send(JSON.stringify({type:"connectbyroomid",data:e.target["connect-by-room-id"].value}))},r.state={lobbyList:[],roomId:void 0},r.emitter=e.emitter,r}return Object(s.a)(n,[{key:"componentWillMount",value:function(){this.wsReconnect()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.reconnectTimeout),void 0!==this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.close(1e3)}},{key:"componentWillReceiveProps",value:function(e){this.props.match.params.gameId!==e.match.params.gameId&&this.ws.send(JSON.stringify({type:"list",data:{gameId:""+e.match.params.gameId}}))}},{key:"render",value:function(){var e=this;return Object(c.jsxs)("div",{className:z.a.lobby,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)(y,{name:"search-input",placeholder:"\u041f\u043e\u0438\u0441\u043a",autoComplete:!1}),Object(c.jsx)(y,{name:"connect-by-room-id",placeholder:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043f\u043e id",autoComplete:!1,onSubmit:this.connectById}),Object(c.jsx)(I,{onClick:this.createNewRoom,children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u043e\u043c\u043d\u0430\u0442\u0443"})]}),Object(c.jsx)("div",{children:this.state.lobbyList.map((function(t){return Object(c.jsx)(B,{data:t,ws:e.ws,emitter:e.props.emitter,setPopupUntracked:e.props.setPopupUntracked})}))})]})}}]),n}(u.a.Component)),B=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).getPlayers=function(){return r.props.data.users.map((function(e){return Object(c.jsxs)("span",{children:[Object(c.jsxs)("span",{children:[e.userId,"#"]}),Object(c.jsx)("span",{children:e.userName})]})}))},r.getTags=function(){var e=[];return e.push(P(r.props.data.gameId)),r.props.data.usePw&&e.push("password"),e.push("public"),r.props.data.autostart&&e.push("autostart"),r.props.data.started&&e.push("started"),e.map((function(e){return Object(c.jsx)("div",{children:e})}))},r.popupDetails=function(){return r.props.setPopupUntracked(Object(c.jsx)(b.a,{setPopupUntracked:r.props.setPopupUntracked,children:Object(c.jsx)(E,{ws:r.props.ws,data:r.props.data,disabled:!0})}))},r.leave=function(){r.props.ws.send(JSON.stringify({type:"leave",data:r.props.data.roomId})),r.setState({connected:!1}),r.props.emitter.emit("private","\u0412\u044b \u043f\u043e\u043a\u0438\u043d\u0443\u043b\u0438 \u043a\u043e\u043c\u043d\u0430\u0442\u0443 #"+r.props.data.roomId)},r.state={connected:e.data.users.some((function(e){return e.userId===localStorage.getItem("userId")&&!1===e.leave}))},r}return Object(s.a)(n,[{key:"render",value:function(){return Object(c.jsxs)("div",{className:z.a.item,children:[this.state.connected?Object(c.jsxs)("div",{className:z.a.connected,children:[Object(c.jsx)("div",{children:"\u0412\u044b \u0443\u0436\u0435 \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u043b\u0438\u0441\u044c \u043a \u0434\u0430\u043d\u043d\u043e\u0439 \u043a\u043e\u043c\u043d\u0430\u0442\u0435!"}),Object(c.jsx)("div",{onClick:this.reconnect,children:Object(c.jsx)(p.b,{to:"/game/".concat(this.props.data.gameId,"/").concat(this.props.data.roomId),children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f"})}),Object(c.jsx)("div",{onClick:this.leave,children:"\u041f\u043e\u043a\u0438\u043d\u0443\u0442\u044c"})]}):null,Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{children:["#",this.props.data.roomId]}),Object(c.jsx)("span",{children:this.props.data.name})]}),Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{children:[this.props.data.users.length||0," / ",this.props.data.max," : "]}),Object(c.jsx)("span",{children:this.getPlayers()})]}),Object(c.jsx)("div",{children:this.getTags()})]}),this.state.connected?null:Object(c.jsx)("div",{children:Object(c.jsxs)(I,{onClick:this.popupDetails,children:[Object(c.jsx)("span",{children:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435"}),Object(c.jsx)(T,{})]})})]})]})}}]),n}(u.a.Component),L=W,R=n(56);var A=n(57);function J(e){return function(e){if(Array.isArray(e))return Object(R.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(A.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var V=n(94),X=n.n(V);function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function q(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var K=l.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),Z=l.createElement("path",{d:"M8 4h13v2H8V4zm-5-.5h3v3H3v-3zm0 7h3v3H3v-3zm0 7h3v3H3v-3zM8 11h13v2H8v-2zm0 7h13v2H8v-2z",fill:"#000"});function Q(e,t){var n=e.title,r=e.titleId,a=q(e,["title","titleId"]);return l.createElement("svg",Y({viewBox:"0 0 24 24",width:24,height:24,ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,K,Z)}var $=l.forwardRef(Q),ee=(n.p,Object(l.lazy)((function(){return n.e(7).then(n.bind(null,102))}))),te=Object(l.lazy)((function(){return n.e(6).then(n.bind(null,101))})),ne=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var s;return Object(a.a)(this,n),(s=t.call(this,e)).wsReconnect=function(){var e=new WebSocket("wss://games-ws.ionquen.ru:8083");console.log("\u041f\u043e\u043f\u044b\u0442\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443"),e.onopen=function(){e.send(JSON.stringify({type:"connect",data:{roomId:s.props.match.params.roomId,token:localStorage.getItem("token")}})),s.props.emitter.emit("chatStateChange",!1),e.onmessage=function(e){var t=JSON.parse(e.data),n=t.data;switch(t.type){case"connect":s.setState({roomInfo:n.roomInfo}),void 0!==n.gameInfo&&s.setState({gameInfo:n.gameInfo}),s.props.emitter.emit("private","\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u043a\u043e\u043c\u043d\u0430\u0442\u0435 #"+s.state.roomInfo.roomId),s.props.emitter.emit("privateChatHistory",n.chat);break;case"chat":s.props.emitter.emit("private",n);break;case"userJoin":s.setState((function(e){return{roomInfo:Object(r.a)(Object(r.a)({},e.roomInfo),{},{users:[].concat(J(e.roomInfo.users),[n])})}}));break;case"userLeave":var a=[];s.state.roomInfo.started?s.state.roomInfo.users.forEach((function(e){return e.userId!==n?a.push(e):a.push(Object(r.a)(Object(r.a)({},e),{},{leave:!0}))})):s.state.roomInfo.users.forEach((function(e){return e.userId!==n?a.push(e):null})),s.setState((function(e){return{roomInfo:Object(r.a)(Object(r.a)({},e.roomInfo),{},{users:a})}}));break;case"userDisconnected":var i=[];s.state.roomInfo.users.forEach((function(e){return e.userId!==n?i.push(e):i.push(Object(r.a)(Object(r.a)({},e),{},{connected:!1}))})),s.setState((function(e){return{roomInfo:Object(r.a)(Object(r.a)({},e.roomInfo),{},{users:i})}}));break;case"userConnected":var o=[];s.state.roomInfo.users.forEach((function(e){return e.userId!==n?o.push(e):o.push(Object(r.a)(Object(r.a)({},e),{},{connected:!0}))})),s.setState((function(e){return{roomInfo:Object(r.a)(Object(r.a)({},e.roomInfo),{},{users:o})}}));break;case"start":s.setState((function(e){return{roomInfo:Object(r.a)(Object(r.a)({},e.roomInfo),{},{started:!0}),gameInfo:n}}));break;case"finished":s.props.emitter.emit("private","\u041c\u0430\u0442\u0447 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d"),s.setState((function(e){return{roomInfo:Object(r.a)(Object(r.a)({},e.roomInfo),{},{started:!1})}}));break;case"game":s.props.emitter.emit("game",n)}},s.ws=e},e.onerror=function(t){return e.close()},e.onclose=function(e){return 1e3===e?null:function(){s.reconnectTimeout=setTimeout(s.wsReconnect,3e3)}}},s.startTheGame=function(e){e.preventDefault(),s.ws.send(JSON.stringify({type:"start"}))},s.redirectToLobby=function(){return s.props.history.push("/game/".concat(s.props.match.params.gameId))},s.state={roomInfo:void 0},s}return Object(s.a)(n,[{key:"componentWillMount",value:function(){var e=this;this.wsReconnect(),this.emitterUnsubPrivateChat=this.props.emitter.sub("privateChatSend",(function(t){return e.ws.send(JSON.stringify({type:"chat",data:t}))})),this.emitterUnsubAction=this.props.emitter.sub("action",(function(t){return e.ws.send(JSON.stringify({type:"game",data:t}))}))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.reconnectTimeout),void 0!==this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.close(1e3),this.emitterUnsubAction(),this.emitterUnsubPrivateChat(),this.props.emitter.emit("private","\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043e\u0442 \u043a\u043e\u043c\u043d\u0430\u0442\u044b")}},{key:"getGameComponent",value:function(){if(this.state.roomInfo.started&&void 0!==this.state.gameInfo)switch(this.state.roomInfo.gameId){case"tictactoe":return Object(c.jsx)(ee,{gameInfo:this.state.gameInfo,players:this.state.roomInfo.users,emitter:this.props.emitter});case"minesweeper":return Object(c.jsx)(te,{gameInfo:this.state.gameInfo,players:this.state.roomInfo.users,emitter:this.props.emitter})}}},{key:"render",value:function(){return Object(c.jsx)("div",{className:X.a.room,children:void 0===this.state.roomInfo?Object(c.jsx)(I,{onClick:this.redirectToLobby,children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u0432 \u043b\u043e\u0431\u0431\u0438"}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:X.a.match,children:Object(c.jsx)(l.Suspense,{children:this.getGameComponent()})}),this.state.roomInfo.started?Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(I,{onClick:this.redirectToLobby,className:X.a.btnToLobby,children:[Object(c.jsx)($,{}),Object(c.jsx)("span",{children:"\u0412 \u043b\u043e\u0431\u0431\u0438"})]})}):Object(c.jsxs)(C,Object(r.a)(Object(r.a)({},this.state.roomInfo),{},{disabled:!0,children:[this.state.roomInfo.creator!==localStorage.userId?null:Object(c.jsx)(I,{onClick:this.startTheGame,children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443"}),Object(c.jsx)(I,{onClick:this.redirectToLobby,children:"\u0412 \u043b\u043e\u0431\u0431\u0438"})]}))]})})}}]),n}(u.a.Component),re=n(95),ae=n.n(re),se=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={leftbarDisplay:!1},r}return Object(s.a)(n,[{key:"getItems",value:function(){var e=this;return Object.entries(_()).map((function(t){return Object(c.jsx)("div",{className:e.props.match.params.gameId===t[0]?ae.a.select:"",children:Object(c.jsx)(p.b,{to:"/game/".concat(t[0]),children:Object(c.jsx)("div",{children:t[1]})})})}))}},{key:"render",value:function(){var e=this;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("aside",{className:"".concat(ae.a.leftbar,"  ").concat(this.state.leftbarDisplay?ae.a.leftbarDisplay:""),children:Object(c.jsx)("div",{onClick:function(){return e.setState((function(e){return{leftbarDisplay:!e.leftbarDisplay}}))},children:this.getItems()})}),Object(c.jsx)("div",{className:ae.a.leftbarStateBtn,onClick:function(){return e.setState((function(e){return{leftbarDisplay:!e.leftbarDisplay}}))},children:Object(c.jsx)($,{})})]})}}]),n}(u.a.Component),ie=n(46);function oe(){return(oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ce(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var le=l.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),ue=l.createElement("path",{d:"M1.923 9.37c-.51-.205-.504-.51.034-.689l19.086-6.362c.529-.176.832.12.684.638l-5.454 19.086c-.15.529-.475.553-.717.07L11 13 1.923 9.37zm4.89-.2l5.636 2.255 3.04 6.082 3.546-12.41L6.812 9.17z",fill:"#000"});function de(e,t){var n=e.title,r=e.titleId,a=ce(e,["title","titleId"]);return l.createElement("svg",oe({viewBox:"0 0 24 24",width:24,height:24,ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,le,ue)}var pe=l.forwardRef(de);n.p;function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function he(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var me=l.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),je=l.createElement("path",{d:"M5.763 17H20V5H4v13.385L5.763 17zm.692 2L2 22.5V4a1 1 0 0 1 1-1h18a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H6.455z",fill:"#000"});function fe(e,t){var n=e.title,r=e.titleId,a=he(e,["title","titleId"]);return l.createElement("svg",be({viewBox:"0 0 24 24",width:24,height:24,ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,me,je)}var ve=l.forwardRef(fe);n.p;function Oe(){return(Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ge(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ye=l.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),xe=l.createElement("path",{d:"M11.95 7.95l-1.414 1.414L8 6.828 8 20H6V6.828L3.465 9.364 2.05 7.95 7 3l4.95 4.95zm10 8.1L17 21l-4.95-4.95 1.414-1.414 2.537 2.536L16 4h2v13.172l2.536-2.536 1.414 1.414z",fill:"#000"});function Ie(e,t){var n=e.title,r=e.titleId,a=ge(e,["title","titleId"]);return l.createElement("svg",Oe({viewBox:"0 0 24 24",width:24,height:24,ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,ye,xe)}var we=l.forwardRef(Ie);n.p;function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ke(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Pe=l.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),_e=l.createElement("path",{d:"M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"});function Ce(e,t){var n=e.title,r=e.titleId,a=ke(e,["title","titleId"]);return l.createElement("svg",Se({viewBox:"0 0 24 24",width:24,height:24,ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,Pe,_e)}var Ne=l.forwardRef(Ce),Ee=(n.p,n(96)),Me=n.n(Ee),ze=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).wsReconnect=function(){var e=new WebSocket("wss://games-ws.ionquen.ru:8081");console.log("\u041f\u043e\u043f\u044b\u0442\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a \u0441\u0435\u0440\u0432\u0435\u0440\u0443"),e.onopen=function(){e.onmessage=function(e){var t=JSON.parse(e.data),n=t.data;switch(t.type){case"chat":r.globalMessageDisplay(n);break;case"history":r.setState((function(e){return{msgsG:e.msgsG.concat(n)}})),r.globalMessageDisplay("\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u0447\u0430\u0442!");break;default:return}},r.ws=e},e.onerror=function(t){return e.close()},e.onclose=function(e){return 1e3===e?null:function(){r.reconnectTimeout=setTimeout(r.wsReconnect,3e3)}}},r.componentWillUnmount=function(){r.emitterUnsubGlobal(),r.emitterUnsubChatStateChange(),r.emitterUnsubPrivate(),r.emitterUnsubPrivateChatHistory(),clearTimeout(r.reconnectTimeout),void 0!==r.ws&&r.ws.readyState===WebSocket.OPEN&&r.ws.close(1e3)},r.send=function(e){e.preventDefault();var t=e.target.inputMessage.value;if(""!==t){var n={token:localStorage.getItem("token"),text:t,userName:localStorage.getItem("userName")};if(r.state.isGlobalChat)try{r.ws.send(JSON.stringify({type:"chat",data:n}))}catch(a){r.globalMessageDisplay("\u041d\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442\u0441\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443")}else try{r.props.emitter.emit("privateChatSend",n)}catch(s){r.privateMessageDisplay("\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u043a\u043e\u043c\u043d\u0430\u0442\u0435")}r.setState({inputMsgValue:""})}},r.globalMessageDisplay=function(e){return r.setState((function(t){return{msgsG:[].concat(J(t.msgsG),[e])}}))},r.privateMessageDisplay=function(e){return r.setState((function(t){return{msgsP:[].concat(J(t.msgsP),[e])}}))},r.chatVisibleStateChange=function(){return r.setState({visible:!r.state.visible})},r.state={msgsG:[],msgsP:[],isGlobalChat:!0,visible:!1,inputMsgValue:""},r}return Object(s.a)(n,[{key:"componentWillMount",value:function(){this.wsReconnect()}},{key:"componentDidMount",value:function(){var e=this;this.emitterUnsubGlobal=this.props.emitter.sub("global",(function(t){return e.globalMessageDisplay(t)})),this.emitterUnsubPrivate=this.props.emitter.sub("private",(function(t){return e.privateMessageDisplay(t)})),this.emitterUnsubChatStateChange=this.props.emitter.sub("chatStateChange",(function(t){return e.setState({isGlobalChat:t})})),this.emitterUnsubPrivateChatHistory=this.props.emitter.sub("privateChatHistory",(function(t){var n,r=[],a=Object(ie.a)(t);try{var s=function(){var t=n.value;if(e.state.msgsP.some((function(e){return e.date===t.date})))return"break";r.push(t)};for(a.s();!(n=a.n()).done;){if("break"===s())break}}catch(i){a.e(i)}finally{a.f()}e.setState((function(e){return{msgsP:e.msgsP.concat(r)}})),e.privateMessageDisplay("\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u0447\u0430\u0442!")}))}},{key:"render",value:function(){var e=this;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("aside",{className:"".concat(Me.a.chat," ").concat(this.state.visible?Me.a.chatDisplay:""),children:[Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:Object(c.jsx)("div",{onClick:function(){return e.setState({isGlobalChat:!e.state.isGlobalChat})},children:Object(c.jsx)(we,{className:this.state.isGlobalChat?null:Me.a.global})})}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:this.state.isGlobalChat?Me.a.selected:null,children:"\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439 \u0447\u0430\u0442"}),Object(c.jsx)("div",{className:this.state.isGlobalChat?null:Me.a.selected,children:"\u041f\u0440\u0438\u0432\u0430\u0442\u043d\u044b\u0439 \u0447\u0430\u0442"})]}),Object(c.jsx)("div",{children:Object(c.jsx)("div",{onClick:this.chatVisibleStateChange,children:Object(c.jsx)(Ne,{})})})]}),Object(c.jsx)("div",{children:Object(c.jsx)(De,{msgs:this.state.isGlobalChat?this.state.msgsG:this.state.msgsP})})]}),Object(c.jsx)("div",{children:Object(c.jsx)(y,{name:"inputMessage",value:this.state.inputMsgValue,onChange:function(t){return e.setState({inputMsgValue:t.value})},autoComplete:!1,placeholder:"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",onSubmit:this.send,children:Object(c.jsx)(pe,{})})})]}),Object(c.jsx)("div",{className:Me.a.chatStateBtn,onClick:this.chatVisibleStateChange,children:Object(c.jsx)(ve,{})})]})}}]),n}(u.a.Component),De=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return this.props.msgs.map((function(e){return void 0!==e.userName?Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{children:[new Date(e.date).toLocaleString("ru",{minute:"numeric",hour:"numeric"}),"  "]}),Object(c.jsx)("span",{children:e.userName}),Object(c.jsxs)("span",{children:[": ",e.text]})]}):Object(c.jsx)("div",{className:Me.a.system,children:Object(c.jsx)("span",{children:e})})}))}}]),n}(u.a.Component),Ue=ze,Ge=n(97),He=n.n(Ge);function Fe(e){return Object(c.jsx)("div",{className:He.a.settings,children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),t.target.userName.value.length<20&&localStorage.setItem("userName",t.target.userName.value),e.setPopupUntracked(null)},children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{children:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(c.jsx)("div",{onClick:function(){return e.setPopupUntracked(null)},children:Object(c.jsx)(Ne,{})})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:He.a.title,children:"\u041e\u0431\u0449\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:"\u041d\u0438\u043a\u043d\u0435\u0439\u043c"}),Object(c.jsx)(g,{name:"userName",value:localStorage.getItem("userName")})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{children:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 ID"}),Object(c.jsx)(g,{name:"userId",disabled:!0,value:localStorage.getItem("userId")})]})]}),Object(c.jsx)("div",{children:Object(c.jsx)(x,{children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]})})}function Te(){return(Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function We(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Be=l.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),Le=l.createElement("path",{d:"M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z",fill:"#000"});function Re(e,t){var n=e.title,r=e.titleId,a=We(e,["title","titleId"]);return l.createElement("svg",Te({viewBox:"0 0 24 24",width:24,height:24,ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,Be,Le)}var Ae=l.forwardRef(Re);n.p;function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ve(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Xe=l.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),Ye=l.createElement("path",{d:"M21 18v3h-2v-3h-2v-2h6v2h-2zM5 18v3H3v-3H1v-2h6v2H5zm6-12V3h2v3h2v2H9V6h2zm0 4h2v11h-2V10zm-8 4V3h2v11H3zm16 0V3h2v11h-2z",fill:"#000"});function qe(e,t){var n=e.title,r=e.titleId,a=Ve(e,["title","titleId"]);return l.createElement("svg",Je({viewBox:"0 0 24 24",width:24,height:24,ref:t,"aria-labelledby":r},a),n?l.createElement("title",{id:r},n):null,Xe,Ye)}var Ke=l.forwardRef(qe),Ze=(n.p,n(98)),Qe=n.n(Ze),$e=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={displayMenu:!1},r}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return Object(c.jsxs)("header",{className:"".concat(Qe.a.topbar," ").concat(this.state.displayMenu?Qe.a.displayMenu:null),children:[Object(c.jsxs)("nav",{children:[Object(c.jsx)("div",{onClick:function(){return e.setState((function(e){return{displayMenu:!e.displayMenu}}))},children:Object(c.jsx)(Ae,{})}),Object(c.jsxs)("div",{onClick:function(){return e.setState({displayMenu:!1})},children:[Object(c.jsx)(p.b,{to:"/",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"}),Object(c.jsx)(p.b,{to:{search:"popup=rules"},children:"\u041f\u0440\u0430\u0432\u0438\u043b\u0430"}),Object(c.jsx)(p.b,{to:{search:"popup=support"},children:"\u041f\u043e\u043c\u043e\u0449\u044c"})]})]}),Object(c.jsxs)(p.b,{to:{search:"popup=".concat(this.props.match.params.gameId)},children:[Object(c.jsx)("span",{children:"\u0420\u0443\u043a\u043e\u0432\u043e\u0434\u0441\u0442\u0432\u043e: "}),Object(c.jsx)("span",{children:P(this.props.match.params.gameId)})]}),Object(c.jsxs)("div",{onClick:function(){return e.props.setPopupUntracked(Object(c.jsx)(Fe,{setPopupUntracked:e.props.setPopupUntracked}))},children:[Object(c.jsxs)("div",{children:["#",localStorage.getItem("userId")]}),Object(c.jsx)("div",{children:localStorage.getItem("userName")}),Object(c.jsx)("div",{children:Object(c.jsx)(Ke,{})})]})]})}}]),n}(u.a.Component),et=n(99),tt=n.n(et),nt=n(55),rt=n.n(nt),at=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).setPopupUntracked=function(e){r.setState({popupElement:e})},r.state={popupElement:null},r}return Object(s.a)(n,[{key:"componentWillMount",value:function(){void 0===this.emitter&&(this.emitter=new st)}},{key:"componentDidMount",value:function(){this.backGradient=new rt.a({element:"#grad-backg",direction:"left-right",states:{"default-state":{gradients:[["#EF8D5B","#EFB75B"],["#EFC55B","#EFDA5B"],["#E8ED5A","#EF815B"]],transitionSpeed:2e4}}})}},{key:"componentWillUnmount",value:function(){this.backGradient.destroy()}},{key:"render",value:function(){var e=this;return Object(c.jsxs)("div",{className:tt.a.fullpage,children:[Object(c.jsx)(d.a,{path:"/game/:gameId",component:function(t){return Object(c.jsx)($e,Object(r.a)(Object(r.a)({},t),{},{setPopupUntracked:e.setPopupUntracked}))}}),Object(c.jsxs)("div",{className:tt.a.page,children:[Object(c.jsxs)(d.c,{children:[Object(c.jsx)(d.a,{path:"/game/:gameId/:roomId",render:function(t){return Object(c.jsx)(ne,Object(r.a)(Object(r.a)({},t),{},{emitter:e.emitter}))}}),Object(c.jsx)(d.a,{path:"/game/:gameId",render:function(t){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(se,Object(r.a)({},t)),Object(c.jsx)(L,Object(r.a)(Object(r.a)({},t),{},{emitter:e.emitter,setPopupUntracked:e.setPopupUntracked}))]})}})]}),Object(c.jsx)(Ue,{emitter:this.emitter})]}),Object(c.jsx)("canvas",{id:"grad-backg"}),this.state.popupElement]})}}]),n}(u.a.Component),st=function(){function e(){Object(a.a)(this,e),this.events=[]}return Object(s.a)(e,[{key:"sub",value:function(e,t){var n=this;return Array.isArray(this.events[e])||(this.events[e]=[]),this.events[e].push(t),function(){n.events[e]=n.events[e].filter((function(e){return t!==e}))}}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].forEach((function(e){return e.call.apply(e,[null].concat(n))}))}}]),e}();t.default=at},43:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"a",(function(){return s}))},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(57);function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(r.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}},56:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},57:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(56);function a(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},90:function(e,t,n){e.exports={input:"formElements_input__383-J",select:"formElements_select__3_H9M",number:"formElements_number__1eHwP",checkbox:"formElements_checkbox__1Ucvc",button:"formElements_button__2SfXx"}},91:function(e,t,n){e.exports={roomInfo:"roomInfo_roomInfo__1mFgj",disconnected:"roomInfo_disconnected__24G-1"}},92:function(e){e.exports=JSON.parse('{"tictactoe":"\u041a\u0440\u0435\u0441\u0442\u0438\u043a\u0438-\u043d\u043e\u043b\u0438\u043a\u0438","minesweeper":"\u0421\u0430\u043f\u0451\u0440","reversi":"\u0420\u0435\u0432\u0435\u0440\u0441\u0438"}')},93:function(e,t,n){e.exports={lobby:"lobby_lobby__g4Omn",item:"lobby_item__3xs5D",connected:"lobby_connected__-Ig30"}},94:function(e,t,n){e.exports={room:"room_room__2rs_b",match:"room_match__2zuUt",btnToLobby:"room_btnToLobby__KkDG2"}},95:function(e,t,n){e.exports={leftbar:"leftbar_leftbar__K-yD4",leftbarDisplay:"leftbar_leftbarDisplay__2V4rz",select:"leftbar_select__3_N32",leftbarStateBtn:"leftbar_leftbarStateBtn__Q5aZH"}},96:function(e,t,n){e.exports={chat:"chat_chat__2N-A0",global:"chat_global__2uImr",selected:"chat_selected__2tg7k",system:"chat_system__2tgLF",chatDisplay:"chat_chatDisplay__1Lkwg",chatStateBtn:"chat_chatStateBtn__1Murg"}},97:function(e,t,n){e.exports={settings:"settings_settings__1NiIN",settingsA:"settings_settingsA__SP21I",title:"settings_title__8GY4w"}},98:function(e,t,n){e.exports={topbar:"topbar_topbar__2f6mz",displayMenu:"topbar_displayMenu__3LvLZ"}},99:function(e,t,n){e.exports={fullpage:"app_fullpage__344yo",page:"app_page__10lvp"}}}]);
//# sourceMappingURL=5.e24d08fc.chunk.js.map